<!DOCTYPE html>    
<html lang="id">    
<head>    
<meta charset="UTF-8" />    
  <meta name="author" content="Y&Z Studio - Powered by AI & Human Creativity">    
<meta name="copyright" content="¬© 2025 Y&Z Studio - yudabastard84@gmail.com">    
	<!-- Meta dasar -->    
<meta charset="UTF-8">    
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">    
<meta name="theme-color" content="#1e1e1e"> <!-- Warna status bar -->    
<meta name="mobile-web-app-capable" content="yes">    
<meta name="apple-mobile-web-app-capable" content="yes">    
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">    
<meta name="apple-mobile-web-app-title" content="My Audio App">    
    
<!-- PWA Manifest -->    
<link rel="manifest" href="manifest.json" />    
<link rel="icon" type="image/png" sizes="192x192" href="192.png" />    
<link rel="apple-touch-icon" href="192.png" />    
    
<!-- SEO -->    
	<title>My Video App -  Offline</title>    
<meta name="description" content="Play your favorite video files offline with rich EQ and player features.">    
    
<!-- OG (untuk share) -->    
<meta property="og:title" content="My Video App">    
<meta property="og:description" content="A fast, offline-ready Video player PWA. Try now!">    
<meta property="og:image" content="icon-512.png">    
<meta property="og:type" content="website">    
<meta property="og:url" content="https://yoursite.com/">    
    
<!-- Optional favicon -->    
<link rel="shortcut icon" href="icon-192.png" type="image/png">    
  <title>Mini Video Player PWA</title>    
  <style>    
html, body {    
  margin: 0;    
  padding: 0;    
  width: 100%;    
  height: 100%;    
  background: #000;    
  font-family: sans-serif;    
  overflow: hidden;    
}    
    
/* Main video wrapper */    
#videoContainer {    
  position: fixed;    
  top: 0; left: 0;    
  width: 100vw;    
  height: 100vh;    
  overflow: hidden;    
  display: flex;    
  align-items: center;    
  justify-content: center;    
  background: #000;    
}    
    
#videoContainer video {    
  position: absolute;    
  top: 50%;    
  left: 50%;    
  transform: translate(-50%, -50%);    
  width: 100%;    
  height: 100%;    
  object-fit: cover;    
}    
    
@media (orientation: portrait) {    
  #videoContainer video {    
    width: auto;    
    height: 100vh;    
    object-fit: contain;    
        object-fit: contain !important;
  }    
}    
    
@media (orientation: landscape) {    
  #videoContainer video {    
    width: 100vw;    
    height: auto;    
    object-fit: cover;    
  }    
}    
    
#miniPlayer {    
  position: fixed;    
  bottom: 10px;    
  right: 10px;    
  width: 200px;    
  height: 112.5px; /* 16:9 ratio */    
  background: black;    
  border-radius: 10px;    
  overflow: hidden;    
  z-index: 9999;    
    display: none;    
    background: #000;    
  box-shadow: 0 0 10px rgba(0,0,0,0.5);    
}    
    
#miniPlayer video,    
#miniVideo {    
  width: 100%;    
  height: 100%;    
  object-fit: contain;    
  background: black;    
}    
  
    body {  
      margin: 0;  
      padding: 0;  
      background: #000;  
      display: flex;  
      justify-content: center;  
      align-items: center;  
      height: 100vh;  
    }  
  
    #videoInput {  
      position: absolute;  
      top: 10px;  
      left: 10px;  
      z-index: 10;  
    }  
  
    .video-wrapper {    
      width: 100%;  
      height: 100%;  
      background: #000;    
      display: flex;    
      justify-content: center;    
      align-items: center;    
      overflow: hidden;    
  cursor: move;
  z-index: 9999;
  display: none; /* default disembunyikan, muncul saat minimize */
}
    video {    
      max-width: 100%;    
      max-height: 100%;    
      object-fit: contain;    
      background: #000;    
    }    
    
    .player-container {    
    width: 100vw;    
    height: 100vh;    
    display: flex;    
    justify-content: center;    
    align-items: center;    
    background: black;    
  }    
    
  .player-container video {    
    width: 100%;    
    height: 100%;    
    object-fit: cover; /* or contain / fill tergantung mau crop atau penuh */    
  }    
    
/* Hidden file input */    
#fileInput {    
  display: none;    
}    
    
/* Open video button */    
#openButton {    
  position: absolute;    
  top: 10px;    
  left: 10px;    
  z-index: 1001;    
  background: rgba(255,255,255,0.1);    
  padding: 10px 15px;    
  color: white;    
  border: none;    
  border-radius: 8px;    
  font-size: 14px;    
  cursor: pointer;    
}    
    
/* Minimize player */    
#minimizeBtn {    
  position: absolute;    
  top: 10px;    
  right: 10px;    
  background: rgba(0,0,0,0.4);    
  color: #fff;    
  border: none;    
  font-size: 12px;    
  padding: 4px 6px;    
  cursor: pointer;    
}    
    
.vjs-watermark, .plyr__branding, .branding, .video-branding {    
  display: none !important;    
}    
    
.vjs-powered-by, .vjs-branding, .plyr__badge {    
  display: none !important;    
  opacity: 0 !important;    
  visibility: hidden !important;    
}    

#floatingVideoWrapper {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 200px;
  z-index: 9999;
  background: #000;
  border-radius: 10px;
  overflow: hidden;
  cursor: move;
}
#floatingVideoWrapper video {
  width: 100%;
  display: block;
}


#presetSelect {
  position: absolute;
  top: 10px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10;
  background: white;
  padding: 5px 10px;
  border-radius: 5px;
  font-size: 14px;
}
    
  </style>    
</head>      
	<body onclick="enterFullscreenOnce()">      
		    
		<div class="video-wrapper" id="videoWrapper">      
</div>      
<input type="file" accept="video/*" id="videoInput"  hidden />    
      
    <div class="player-container" id="playerContainer"></div>    
	     
<!-- FILE INPUT + OPEN BUTTON -->    
<input type="file" id="fileInput" accept="video/*" hidden />    
<button id="openButton">üìÅ Ambil Video</button>    
    
<!-- VIDEO WRAPPER (BISA DIPAKAI UNTUK MODE NORMAL & MINI) -->    
<div id="videoContainer">    
  <video id="mainVideo" controls autoplay playsinline></video>     
</div>    
   
    <select id="presetSelect">
    	  <option value="Same Soft">Same Soft</option>
  <option value="Broadcast Voice">Broadcast Voice</option>
  <option value="Live Concert Hall">Live Concert Hall</option>
  <option value="Music Video Pop">Music Video Pop</option>
    <option value="Studio Cover">Studio Cover</option>
      <option value="EDM Visualizer">EDM Visualizer</option>
  <option value="Horror Ambience">Horror Ambience</option>
      <option value="Action Film Punch">Action Film Punch</option>
  <option value="Romantic Drama">Romantic Drama</option>
  <option value="Orchestra Film Score">Orchestra Film Score</option>
        <option value="Surround Feel">Surround Feel</option>
</select>
    
  <script>      
  	window.addEventListener("error", e => console.error("‚ùå Global Error:", e.message));      
        
const fileInput = document.getElementById("fileInput");
const openButton = document.getElementById("openButton");
const mainVideo = document.getElementById("mainVideo");
const videoContainer = document.getElementById("videoContainer");

fileInput.addEventListener("change", (e) => {
  const file = e.target.files[0];
  if (!file) return;

  const url = URL.createObjectURL(file);

  mainVideo.src = url;
  mainVideo.autoplay = true;
  mainVideo.controls = true;
  mainVideo.playsInline = true;

  // optional: mute kalau audio mau diolah terpisah
  // mainVideo.muted = true;
});

    openButton.onclick = () => fileInput.click();      
      
    fileInput.addEventListener("change", (e) => {      
      const file = e.target.files[0];      
      if (mainVideo.src) {      
  mainVideo.pause();      
  mainVideo.removeAttribute("src");      
  mainVideo.load();      
}      
      if (!file) return;      
      const url = URL.createObjectURL(file);      
      mainVideo.src = url;      
      miniVideo.src = url;      
      mainVideo.play();      
      requestFullscreenLandscape();      
    });      
      
    function requestFullscreenLandscape() {      
      if (screen.orientation && screen.orientation.lock) {      
        screen.orientation.lock("landscape").catch(() => {});      
      }      
      if (mainVideo.requestFullscreen) {      
        mainVideo.requestFullscreen().catch(() => {});      
      } else if (mainVideo.webkitRequestFullscreen) {      
        mainVideo.webkitRequestFullscreen();      
      }      
    }      
          
    // Saat video mulai play      
mainVideo.addEventListener("play", () => {      
  if (screen.orientation && screen.orientation.lock) {      
    screen.orientation.lock("landscape").catch((err) => {      
      console.warn("Gagal rotasi otomatis:", err);      
    });      
  }      
});      
         

const video = document.getElementById("video");      
const input = document.getElementById("videoInput");      
const wrapper = document.getElementById("videoWrapper");      
let hasEnteredFullscreen = false;      
      
// ========== Adaptive Aspect Ratio ==========      
input.addEventListener("change", (e) => {      
  const file = e.target.files[0];      
  if (!file) return;      
      
  const url = URL.createObjectURL(file);      
  video.src = url;      
      
  video.addEventListener("loadedmetadata", () => {      
    const w = video.videoWidth;      
    const h = video.videoHeight;      
    const aspectRatio = w / h;      
      
    if (aspectRatio > 1.1) {      
      wrapper.style.aspectRatio = "16 / 9";      
    } else if (aspectRatio < 0.9) {      
      wrapper.style.aspectRatio = "9 / 16";      
    } else {      
      wrapper.style.aspectRatio = "1 / 1";      
    }      
  });      
});      
    
let lastPlaybackTime = 0;    

    
window.addEventListener("orientationchange", () => {
  const wrapper = document.getElementById("videoWrapper");
  if (window.innerHeight > window.innerWidth) {
    wrapper.style.aspectRatio = "9 / 16";
  } else {
    wrapper.style.aspectRatio = "16 / 9";
  }
});

const observer = new ResizeObserver(() => {
  const w = mainVideo.clientWidth;
  const h = mainVideo.clientHeight;
  const aspectRatio = w / h;

  if (aspectRatio > 1.1) {
    mainVideo.style.aspectRatio = "16 / 9";
  } else if (aspectRatio < 0.9) {
    mainVideo.style.aspectRatio = "9 / 16";
  } else {
    mainVideo.style.aspectRatio = "1 / 1";
  }
});

observer.observe(mainVideo);
    
// ========== Auto Play on Tap + Fullscreen Once ==========    
window.addEventListener("click", () => {    
  if (!hasEnteredFullscreen) {    
    const el = document.getElementById("videoContainer");    
    if (el?.requestFullscreen) {    
      el.requestFullscreen().catch((err) => console.warn("Fullscreen gagal:", err));    
    }    
    hasEnteredFullscreen = true;    
  }    
  video.play().catch(() => {});    
});    
    
// ========== Auto Resume after Minimize/Restore ==========    
document.addEventListener("visibilitychange", () => {
  const videoContainer = document.getElementById("videoContainer");
  const miniPlayer = document.getElementById("miniPlayer");
  const mainVideo = document.getElementById("mainVideo");
  const miniVideo = document.getElementById("miniVideo");

  if (!videoContainer || !miniPlayer || !mainVideo || !miniVideo) return;

  if (document.visibilityState === "hidden") {
    videoContainer.style.display = "none";
    miniPlayer.style.display = "block";
    miniVideo.currentTime = mainVideo.currentTime || 0;
    miniVideo.play().catch(() => {});
  } else if (document.visibilityState === "visible") {
    miniVideo.pause();
    miniPlayer.style.display = "none";
    videoContainer.style.display = "flex";
    mainVideo.currentTime = miniVideo.currentTime || 0;
    mainVideo.play().catch(() => {});

    if (mainVideo.paused) {
      setTimeout(() => {
        mainVideo.play().catch(() => {});
      }, 100);
    }
  }
});


let isDragging = false, offsetX = 0, offsetY = 0;

wrapper.addEventListener("mousedown", (e) => {
  isDragging = true;
  offsetX = e.clientX - wrapper.offsetLeft;
  offsetY = e.clientY - wrapper.offsetTop;
});

document.addEventListener("mousemove", (e) => {
  if (!isDragging) return;
  wrapper.style.left = `${e.clientX - offsetX}px`;
  wrapper.style.top = `${e.clientY - offsetY}px`;
  wrapper.style.right = "auto";
  wrapper.style.bottom = "auto";
});

document.addEventListener("mouseup", () => {
  isDragging = false;
});

window.addEventListener("scroll", () => {
  if (window.scrollY > 150) {
    wrapper.style.width = "180px";
    wrapper.style.bottom = "20px";
    wrapper.style.right = "20px";
  } else {
    wrapper.style.width = "100%";
    wrapper.style.position = "relative";
    wrapper.style.right = "auto";
    wrapper.style.bottom = "auto";
  }
});

function applyPortraitMode() {
  if (window.matchMedia("(orientation: portrait)").matches) {
    mainVideo.classList.add("portraitVideo");
  } else {
    mainVideo.classList.remove("portraitVideo");
  }
}



const ctx = new (window.AudioContext || window.webkitAudioContext)();
let sourceNode = null;

document.getElementById("fileInput").addEventListener("change", (e) => {
  const file = e.target.files[0];
  if (!file) return;

  // Buat video baru tiap kali pilih file
  const url = URL.createObjectURL(file);
  const container = document.getElementById("videoContainer");
  container.innerHTML = ""; // clear video lama

  const video = document.createElement("video");
  video.id = "mainVideo";
  video.controls = true;
  video.autoplay = true;
  video.src = url;
  video.playsInline = true;
  container.appendChild(video);

  // buat source baru tiap video baru
  sourceNode = ctx.createMediaElementSource(video);

  const gainNode = ctx.createGain();
  gainNode.gain.value = 2; // contoh, 200% volume

  const filter = ctx.createBiquadFilter();
  filter.type = "lowpass";
  filter.frequency.setValueAtTime(20000, ctx.currentTime); // default pass semua

  sourceNode.connect(filter);
  filter.connect(gainNode);
  gainNode.connect(ctx.destination);

  video.addEventListener("play", () => {
    if (ctx.state === "suspended") ctx.resume();
  });
});

const presets = {
  "Broadcast Voice": {
    eq: [3, 4, 3, 1, 0, -2, -3, -4, -3, -1, 1, 2],
    compressor: { threshold: -20, ratio: 3, attack: 0.01 },
    enhancer: { presence: 4, brilliance: 2, warmth: 1 },
    reverb: 0.05,
    stereoWidth: 0.4
  },
  "Live Concert Hall": {
    eq: [5, 3, 0, -2, -3, -2, 0, 2, 3, 4, 5, 6],
    compressor: { threshold: -15, ratio: 2.5, attack: 0.03 },
    enhancer: { presence: 2, brilliance: 4, warmth: 2 },
    reverb: 0.6,
    stereoWidth: 1.0
  },
  "Music Video Pop": {
    eq: [4, 3, 1, -1, -2, -1, 1, 2, 4, 5, 6, 5],
    compressor: { threshold: -18, ratio: 3, attack: 0.02 },
    enhancer: { presence: 3, brilliance: 4, warmth: 1 },
    reverb: 0.2,
    stereoWidth: 0.9
  },
  "Studio Cover": {
    eq: [2, 3, 3, 2, 0, -1, -2, -2, 0, 2, 3, 3],
    compressor: { threshold: -16, ratio: 2.5, attack: 0.01 },
    enhancer: { presence: 3, brilliance: 2, warmth: 3 },
    reverb: 0.1,
    stereoWidth: 0.7
  },
  "EDM Visualizer": {
    eq: [6, 5, 3, 0, -2, -1, 1, 3, 5, 6, 6, 6],
    compressor: { threshold: -12, ratio: 4, attack: 0.005 },
    enhancer: { presence: 4, brilliance: 5, warmth: 1 },
    reverb: 0.4,
    stereoWidth: 1.0
  },
  "Horror Ambience": {
    eq: [-2, -3, -4, -2, 0, 1, 3, 4, 3, 2, 1, 0],
    compressor: { threshold: -25, ratio: 1.8, attack: 0.1 },
    enhancer: { presence: 1, brilliance: 0, warmth: 5 },
    reverb: 0.6,
    stereoWidth: 0.8
  },
  "Action Film Punch": {
    eq: [5, 4, 2, 0, -1, -2, -1, 2, 4, 5, 4, 3],
    compressor: { threshold: -10, ratio: 4, attack: 0.008 },
    enhancer: { presence: 4, brilliance: 3, warmth: 2 },
    reverb: 0.2,
    stereoWidth: 0.95
  },
  "Romantic Drama": {
    eq: [1, 2, 1, 0, -1, -1, 0, 2, 3, 2, 1, 1],
    compressor: { threshold: -22, ratio: 2.2, attack: 0.015 },
    enhancer: { presence: 2, brilliance: 1, warmth: 4 },
    reverb: 0.3,
    stereoWidth: 0.75
  },
  "Orchestra Film Score": {
    eq: [3, 3, 2, 0, -1, -2, -1, 2, 3, 4, 5, 6],
    compressor: { threshold: -18, ratio: 3, attack: 0.01 },
    enhancer: { presence: 2, brilliance: 3, warmth: 3 },
    reverb: 0.5,
    stereoWidth: 1.0
  },
  "Natural Documentary": {
    eq: [1, 1, 0, 0, 0, 0, 0, 0, 1, 2, 1, 1],
    compressor: { threshold: -24, ratio: 1.5, attack: 0.03 },
    enhancer: { presence: 1, brilliance: 1, warmth: 2 },
    reverb: 0.1,
    stereoWidth: 0.5
  },
  "City Streets Scene": {
    eq: [0, -1, -2, -1, 0, 1, 2, 3, 3, 2, 1, 0],
    compressor: { threshold: -20, ratio: 2.5, attack: 0.02 },
    enhancer: { presence: 2, brilliance: 1, warmth: 2 },
    reverb: 0.2,
    stereoWidth: 0.8
  },
  "Surround Feel": {
    eq: [4, 3, 2, 0, -2, -3, -1, 1, 3, 4, 5, 4],
    compressor: { threshold: -16, ratio: 3.5, attack: 0.01 },
    enhancer: { presence: 3, brilliance: 4, warmth: 3 },
    reverb: 0.4,
    stereoWidth: 1.0
  },
  "Same Soft": {
    eq: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    compressor: { threshold: -22, ratio: 1.5, attack: 0.05 },
    enhancer: { presence: 0, brilliance: 0, warmth: 0 },
    reverb: 0.0,
    stereoWidth: 0.5
  }
};

let filterNodes = [];

function applyPreset(presetName) {
  // Disconnect semua filter lama
  if (filterNodes.length > 0) {
    try {
      filterNodes.forEach(f => f.disconnect());
    } catch (e) {}
  }

  const config = presets[presetName];
  filterNodes = config.map(cfg => {
    const f = ctx.createBiquadFilter();
    f.type = cfg.type;
    f.frequency.setValueAtTime(cfg.frequency, ctx.currentTime);
    f.gain.setValueAtTime(cfg.gain, ctx.currentTime);
    return f;
  });

  // Sambungin chain baru
  if (sourceNode) {
    sourceNode.disconnect();
    sourceNode.connect(filterNodes[0]);

    for (let i = 0; i < filterNodes.length - 1; i++) {
      filterNodes[i].connect(filterNodes[i + 1]);
    }

    // Akhir ke gain
    filterNodes[filterNodes.length - 1].connect(ctx.destination);
  }
}

document.getElementById("presetSelect").addEventListener("change", (e) => {
  applyPreset(e.target.value);
});


      
function lockVolumeTo200() {
  if (!mainVideo) return;

  mainVideo.volume = 1.0;
  try {
    const context = new AudioContext();
    const source = context.createMediaElementSource(mainVideo);
    const gainNode = context.createGain();

    gainNode.gain.value = 2.0; // 200%
    source.connect(gainNode).connect(context.destination);

    console.log("üîä Volume locked at 200%");
  } catch (e) {
    console.warn("üîá Gagal tingkatkan volume:", e);
  }

  const lock = () => {
    if (mainVideo.volume !== 1.0) mainVideo.volume = 1.0;
  };
  mainVideo.addEventListener("volumechange", lock);
}

document.addEventListener("DOMContentLoaded", lockVolumeTo200);
    
    
      if ('serviceWorker' in navigator) {        
    navigator.serviceWorker.register('sw.js')        
      .then(reg => console.log('‚úÖ Service Worker registered:', reg.scope))        
      .catch(err => console.error('‚ùå Service Worker registration failed:', err));        
  }        
    
console.log("‚úÖ Script Loaded");    
  </script>    
</body>    
</html>  
  
  
  
