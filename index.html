<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="author" content="Y&Z Studio - Powered by AI & Human Creativity">
  <meta name="copyright" content="¬© 2025 Y&Z Studio - yudabastard84@gmail.com">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="theme-color" content="#1e1e1e">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="My Audio App">

  <link rel="manifest" href="manifest.json" />
  <link rel="icon" type="image/png" sizes="192x192" href="192.png" />
  <link rel="apple-touch-icon" href="192.png" />

  <title>Mini Video Player PWA</title>
  <meta name="description" content="Play your favorite video files offline with rich EQ and player features.">
  <meta property="og:title" content="My Video App">
  <meta property="og:description" content="A fast, offline-ready Video player PWA. Try now!">
  <meta property="og:image" content="icon-512.png">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://yoursite.com/">
  <link rel="shortcut icon" href="icon-192.png" type="image/png">

  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      background: #000;
      overflow: hidden;
    }

    #videoContainer {
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #000;
    }

    #videoContainer video {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    @media (orientation: portrait) {
      #videoContainer video {
        width: auto;
        height: 100vh;
      }
    }

    @media (orientation: landscape) {
      #videoContainer video {
        width: 100vw;
        height: auto;
      }
    }

    #miniPlayer {
      position: fixed;
      bottom: 10px;
      right: 10px;
      width: 200px;
      height: 112.5px;
      background: black;
      border-radius: 10px;
      overflow: hidden;
      display: none;
      z-index: 9999;
    }

    #miniPlayer video {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    #openButton, #minimizeBtn {
      position: absolute;
      background: rgba(255,255,255,0.1);
      color: white;
      border: none;
      border-radius: 8px;
      padding: 10px;
      font-size: 14px;
      cursor: pointer;
      z-index: 1001;
    }

    #openButton { top: 10px; left: 10px; }
    #minimizeBtn { top: 10px; right: 10px; background: rgba(0,0,0,0.4); font-size: 12px; padding: 4px 6px; }
  </style>
</head>
<body onclick="enterFullscreenOnce()">

  <input type="file" id="fileInput" accept="video/*" hidden />
  <button id="openButton">üìÅ Ambil Video</button>

  <div id="videoContainer">
    <video id="mainVideo" controls autoplay playsinline></video>
    <button id="minimizeBtn">Minimize</button>
  </div>

  <div id="miniPlayer">
    <video id="miniVideo" muted playsinline></video>
  </div>

<script>
window.addEventListener("error", e => console.error("‚ùå Global Error:", e.message));
  	
    const fileInput = document.getElementById("fileInput");
    const openButton = document.getElementById("openButton");
    const mainVideo = document.getElementById("mainVideo");
    const miniVideo = document.getElementById("miniVideo");
    const videoContainer = document.getElementById("videoContainer");
    const miniPlayer = document.getElementById("miniPlayer");
    const minimizeBtn = document.getElementById("minimizeBtn");

    openButton.onclick = () => fileInput.click();

    fileInput.addEventListener("change", (e) => {
      const file = e.target.files[0];
      if (!file) return;
      const url = URL.createObjectURL(file);
      mainVideo.src = url;
      miniVideo.src = url;
      mainVideo.play();
      requestFullscreenLandscape();
    });

    minimizeBtn.onclick = () => {
      videoContainer.style.display = "none";
      miniPlayer.style.display = "block";
      miniVideo.play();
    };

    miniPlayer.onclick = () => {
      miniPlayer.style.display = "none";
      videoContainer.style.display = "flex";
      mainVideo.play();
    };

    function requestFullscreenLandscape() {
      if (screen.orientation && screen.orientation.lock) {
        screen.orientation.lock("landscape").catch(() => {});
      }
      if (mainVideo.requestFullscreen) {
        mainVideo.requestFullscreen().catch(() => {});
      }
    }

    document.addEventListener("visibilitychange", () => {
      if (document.visibilityState === "visible") {
        setTimeout(() => mainVideo.play().catch(() => {}), 100);
      }
    });

    function enterFullscreenOnce() {
      const el = document.getElementById("videoContainer");
      if (el?.requestFullscreen) el.requestFullscreen().catch(() => {});
    }

    function lockVolumeTo200() {
      mainVideo.volume = 1.0;
      try {
        const context = new AudioContext();
        const source = context.createMediaElementSource(mainVideo);
        const gainNode = context.createGain();
        gainNode.gain.value = 2.0;
        source.connect(gainNode).connect(context.destination);
      } catch (e) { console.warn("üîá Gagal volume boost:", e); }
    }

    document.addEventListener("DOMContentLoaded", lockVolumeTo200);

    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js')
        .then(reg => console.log('‚úÖ Service Worker:', reg.scope))
        .catch(err => console.error('‚ùå SW Error:', err));
    }
    
console.log("‚úÖ Script Loaded");  
</script>  
</body>
</html>
